{% extends "governance/base.html" %}

{% load static %}

{% block title %}Digital Regulations Hub{% endblock %}

{% block dashboard_content %}
<div class="flex flex-col gap-6 w-full">
    <!-- Breadcrumb Navigation -->
    <div class="flex items-center gap-2">
        <button class="w-8 h-8 border-none bg-transparent cursor-pointer flex items-center justify-center rounded-md hover:bg-[#F3F4F6]" onclick="history.back()">
            <img src="{% static 'governance/img/arrow-left.svg' %}" alt="Back" class="w-4 h-4">
        </button>
        <button class="w-8 h-8 border-none bg-transparent cursor-pointer flex items-center justify-center rounded-md hover:bg-[#F3F4F6]" onclick="history.forward()">
            <img src="{% static 'governance/img/arrow-right-gray.svg' %}" alt="Forward" class="w-4 h-4">
        </button>
        <span class="text-sm font-semibold text-[#F13D30]">Compliances</span>
    </div>

    <!-- Page Header -->
    <div class="flex justify-between items-start">
        <div>
            {% if agent_name %}
            <h1 class="text-2xl font-bold text-[#1a1a2e] mb-1">{{ agent_name }}</h1>
            <p class="text-sm text-[#565F6C]">Review data and information of {{ agent_name }}</p>
            {% else %}
            <h1 class="text-xl font-bold text-[#1a1a2e] mb-1">EU AI Act high risks providers</h1>
            <p class="text-sm text-[#565F6C]">EU AI Act Framework and reporting</p>
            {% endif %}
        </div>
        {% if not agent_name %}
        <button class="flex items-center gap-2 px-4 py-2 border border-[#F13D30] bg-white rounded-full text-sm font-semibold text-[#F13D30] hover:bg-[#FEF5F4] transition-colors">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <rect x="3" y="3" width="18" height="18" rx="2" />
                <line x1="12" y1="8" x2="12" y2="16" />
                <line x1="8" y1="12" x2="16" y2="12" />
            </svg>
            Export Report
        </button>
        {% endif %}
    </div>

    <!-- Section Header (if agent_name exists) -->
    <hr class="border-t border-[#E5E7EB]">
    {% if agent_name %}
    <div class="flex justify-between items-start py-4">
        <div class="flex flex-col">
            <h2 class="text-xl font-bold text-[#1a1a2e] tracking-tight">EU AI Act high risks providers</h2>
            <p class="text-sm text-[#565F6C] mt-1">EU AI Act Framework and reporting</p>
        </div>
        <button class="flex items-center gap-2 px-4 py-2 border border-[#DC180A] rounded-full text-[#DC180A] font-semibold text-sm hover:bg-[#FEF5F4] transition-colors duration-200">
            Export Report
        </button>
    </div>
    {% endif %}

    <!-- Frameworks Grid -->
    <div class="grid grid-cols-2 gap-6">
        <!-- EU AI Act Card -->
        <a href="{% url 'digital_regulations_eu_act_hr' %}{% if agent_name %}?agent={{ agent_name|urlencode }}{% endif %}" class="framework-card bg-white rounded-2xl border border-[#E5E7EB] p-8 flex flex-col gap-6 relative transition-shadow hover:shadow-lg no-underline">
            <div class="w-20 h-20 flex items-center justify-center">
                <img src="{% static 'governance/img/eu-ai-act.png' %}" alt="EU AI Act" class="w-18 h-18 object-contain">
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-[#1a1a2e]">EU AI Act</h3>
            </div>
            <span class="absolute top-8 right-8 w-8 h-8 flex items-center justify-center text-[#9CA3AF] hover:text-[#374151] hover:bg-[#F3F4F6] rounded-md transition-colors">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <line x1="7" y1="17" x2="17" y2="7" />
                    <polyline points="7,7 17,7 17,17" />
                </svg>
            </span>
        </a>

        <!-- GDPR Card -->
        <div class="framework-card bg-white rounded-2xl border border-[#E5E7EB] p-8 flex flex-col gap-6 relative transition-shadow hover:shadow-lg">
            <div class="w-20 h-20 flex items-center justify-center">
                <img src="{% static 'governance/img/gdpr.png' %}" alt="GDPR" class="w-18 h-18 object-contain">
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-[#1a1a2e]">GDPR</h3>
            </div>
            <button class="absolute top-8 right-8 w-8 h-8 flex items-center justify-center text-[#9CA3AF] hover:text-[#374151] hover:bg-[#F3F4F6] rounded-md transition-colors border-none bg-transparent cursor-pointer">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <line x1="7" y1="17" x2="17" y2="7" />
                    <polyline points="7,7 17,7 17,17" />
                </svg>
            </button>
        </div>

        <!-- DSA Digital Services Act Card (Highlighted) -->
        <div class="framework-card bg-white rounded-2xl border-2 border-[#E5E7EB] p-8 flex flex-col gap-6 relative transition-shadow hover:shadow-lg" >
            <div class="w-20 h-20 flex items-center justify-center">
                <img src="{% static 'governance/img/dsa.png' %}" alt="DSA" class="w-18 h-18 object-contain">
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-[#1a1a2e]">DSA Digital Services Act</h3>
            </div>
            <button class="absolute top-8 right-8 w-8 h-8 flex items-center justify-center text-[#9CA3AF] hover:text-[#374151] hover:bg-[#F3F4F6] rounded-md transition-colors border-none bg-transparent cursor-pointer">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <line x1="7" y1="17" x2="17" y2="7" />
                    <polyline points="7,7 17,7 17,17" />
                </svg>
            </button>
        </div>

        <!-- Data Act Card -->
        <div class="framework-card bg-white rounded-2xl border border-[#E5E7EB] p-8 flex flex-col gap-6 relative transition-shadow hover:shadow-lg">
            <div class="w-20 h-20 flex items-center justify-center">
                <img src="{% static 'governance/img/eu-ai-act.png' %}" alt="Data Act" class="w-18 h-18 object-contain">
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-[#1a1a2e]">Data Act</h3>
            </div>
            <button class="absolute top-8 right-8 w-8 h-8 flex items-center justify-center text-[#9CA3AF] hover:text-[#374151] hover:bg-[#F3F4F6] rounded-md transition-colors border-none bg-transparent cursor-pointer">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <line x1="7" y1="17" x2="17" y2="7" />
                    <polyline points="7,7 17,7 17,17" />
                </svg>
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Set active nav item
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.classList.remove('active');
            const currentPath = window.location.pathname;
            if (currentPath.includes('/digital-regulations') || currentPath.includes('/regulations')) {
                // Check if it's in Risk Assessment sub menu
                if (link.dataset.nav === 'compliance' && link.closest('.nav-section-items')) {
                    link.classList.add('active');
                }
            }
        });
    });
</script>
{% endblock %}
